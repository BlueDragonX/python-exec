#!@bindir@/python-exec-c
# vim:fileencoding=utf-8:ft=python
# (c) 2012 Michał Górny
# Released under the terms of the 2-clause BSD license.
#
# This is not the script you are looking for. This is just a wrapper.
# The actual scripts of this application were installed with -python*,
# -pypy* or -jython* suffixes. You are most likely looking for one
# of those.

from __future__ import with_statement
import os.path, sys

try:
	from epython import EPYTHON
except ImportError:
	EPYTHON = os.path.basename(sys.executable)

self = sys.argv[0] + '-' + EPYTHON
__file__ = self
sys.argv[0] = self

try:
	kwargs = {}
	if sys.version_info[0] >= 3:
		import tokenize

		# need to provide encoding
		with open(self, 'rb') as f:
			kwargs['encoding'] = tokenize.detect_encoding(f.readline)[0]

	with open(self, 'r', **kwargs) as f:
		data = f.read()
except IOError:
	sys.stderr.write('This Python implementation (%s) is not supported by the script.\n'
			% EPYTHON)
	sys.exit(127)

exec(data)
